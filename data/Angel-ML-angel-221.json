{
    "error_id": "221",
    "information": {
        "errors": [
            {
                "line": "6",
                "severity": "error",
                "message": "Line is longer than 100 characters (found 102).",
                "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
            }
        ]
    },
    "source_code": " * Copyright (C) 2017-2018 THL A29 Limited, a Tencent company. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in\n * compliance with the License. You may obtain a copy of the License at\n *\n * https://opensource.org/licenses/Apache-2.0",
    "results": [
        {
            "tool": "styler",
            "errors": [
                {
                    "line": "6",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 102).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                }
            ],
            "diff": "",
            "diff_size": 0
        },
        {
            "tool": "intellij",
            "errors": [
                {
                    "line": "6",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 102).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                }
            ],
            "diff": "diff --git a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/errored/1/221/SnapshotDumper.java b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/intellij/221/SnapshotDumper.java\nindex 6196e46be7..f7d0650832 100644\n--- a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/errored/1/221/SnapshotDumper.java\n+++ b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/intellij/221/SnapshotDumper.java\n@@ -43,215 +43,218 @@ import org.apache.hadoop.fs.Path;\n  */\n public class SnapshotDumper {\n \n-  private static final Log LOG = LogFactory.getLog(SnapshotDumper.class);\n-  /**\n-   * PS context\n-   */\n-  private final PSContext context;\n+    private static final Log LOG = LogFactory.getLog(SnapshotDumper.class);\n+    /**\n+     * PS context\n+     */\n+    private final PSContext context;\n \n-  /**\n-   * Dump interval in milliseconds\n-   */\n-  private final int backupIntervalMs;\n+    /**\n+     * Dump interval in milliseconds\n+     */\n+    private final int backupIntervalMs;\n \n-  /**\n-   * Dump dispatcher\n-   */\n-  private volatile Thread dumpDispatcher;\n-  private final AtomicBoolean stopped;\n+    /**\n+     * Dump dispatcher\n+     */\n+    private volatile Thread dumpDispatcher;\n+    private final AtomicBoolean stopped;\n \n-  /**\n-   * Application tmp output path\n-   */\n-  private final String outputDir;\n+    /**\n+     * Application tmp output path\n+     */\n+    private final String outputDir;\n \n-  /**\n-   * Need dump matrices\n-   */\n-  private final String[] needDumpMatrices;\n+    /**\n+     * Need dump matrices\n+     */\n+    private final String[] needDumpMatrices;\n \n-  /**\n-   * Snapshot base directory path\n-   */\n-  private final Path baseDirPath;\n+    /**\n+     * Snapshot base directory path\n+     */\n+    private final Path baseDirPath;\n \n-  /**\n-   * Last dump iteration number\n-   */\n-  private int lastIteration;\n+    /**\n+     * Last dump iteration number\n+     */\n+    private int lastIteration;\n \n-  /**\n-   * Application running mode\n-   */\n-  private final RunningMode mode;\n+    /**\n+     * Application running mode\n+     */\n+    private final RunningMode mode;\n \n-  private final int dumpParallel;\n+    private final int dumpParallel;\n \n-  /**\n-   * Create a SnapshotDumper\n-   *\n-   * @param context PS context\n-   */\n-  public SnapshotDumper(PSContext context) {\n-    this.context = context;\n-    stopped = new AtomicBoolean(false);\n-    lastIteration = 0;\n-    mode = context.getRunningMode();\n+    /**\n+     * Create a SnapshotDumper\n+     *\n+     * @param context PS context\n+     */\n+    public SnapshotDumper(PSContext context) {\n+        this.context = context;\n+        stopped = new AtomicBoolean(false);\n+        lastIteration = 0;\n+        mode = context.getRunningMode();\n \n-    backupIntervalMs = context.getConf()\n-        .getInt(AngelConf.ANGEL_PS_BACKUP_INTERVAL_MS,\n-            AngelConf.DEFAULT_ANGEL_PS_BACKUP_INTERVAL_MS);\n+        backupIntervalMs = context.getConf()\n+                .getInt(AngelConf.ANGEL_PS_BACKUP_INTERVAL_MS,\n+                        AngelConf.DEFAULT_ANGEL_PS_BACKUP_INTERVAL_MS);\n \n-    dumpParallel = context.getConf()\n-        .getInt(AngelConf.ANGEL_PS_BACKUP_PARALLEL, AngelConf.DEFAULT_ANGEL_PS_BACKUP_PARALLEL);\n+        dumpParallel = context.getConf()\n+                .getInt(AngelConf.ANGEL_PS_BACKUP_PARALLEL,\n+                        AngelConf.DEFAULT_ANGEL_PS_BACKUP_PARALLEL);\n \n-    outputDir = context.getConf().get(AngelConf.ANGEL_JOB_TMP_OUTPUT_PATH);\n-    baseDirPath = new Path(\n-        outputDir + Path.SEPARATOR + ModelFilesConstent.snapshotDirName + Path.SEPARATOR + context\n-            .getPSAttemptId().getPsId() + Path.SEPARATOR + context.getPSAttemptId().getIndex());\n+        outputDir = context.getConf().get(AngelConf.ANGEL_JOB_TMP_OUTPUT_PATH);\n+        baseDirPath = new Path(\n+                outputDir + Path.SEPARATOR + ModelFilesConstent.snapshotDirName + Path.SEPARATOR +\n+                        context\n+                                .getPSAttemptId().getPsId() + Path.SEPARATOR +\n+                        context.getPSAttemptId().getIndex());\n \n-    String matricesStr = context.getConf().get(AngelConf.ANGEL_PS_BACKUP_MATRICES);\n-    if (matricesStr == null) {\n-      needDumpMatrices = null;\n-    } else {\n-      needDumpMatrices = matricesStr.split(\",\");\n+        String matricesStr = context.getConf().get(AngelConf.ANGEL_PS_BACKUP_MATRICES);\n+        if (matricesStr == null) {\n+            needDumpMatrices = null;\n+        } else {\n+            needDumpMatrices = matricesStr.split(\",\");\n+        }\n     }\n-  }\n \n-  /**\n-   * Init\n-   */\n-  public void init() {\n-  }\n+    /**\n+     * Init\n+     */\n+    public void init() {\n+    }\n \n-  /**\n-   * Start dump dispatcher\n-   */\n-  public void start() {\n-    LOG.info(\"Start snapshot dumper\");\n-    dumpDispatcher = new Thread(() -> {\n-      while (!stopped.get() && !Thread.currentThread().isInterrupted()) {\n-        try {\n-          Thread.sleep(backupIntervalMs);\n-          try {\n-            LOG.info(\"to writeSnapshots\");\n-            while (context.getRunningContext().getState() == ServerState.BUSY) {\n-              Thread.sleep(5000);\n+    /**\n+     * Start dump dispatcher\n+     */\n+    public void start() {\n+        LOG.info(\"Start snapshot dumper\");\n+        dumpDispatcher = new Thread(() -> {\n+            while (!stopped.get() && !Thread.currentThread().isInterrupted()) {\n+                try {\n+                    Thread.sleep(backupIntervalMs);\n+                    try {\n+                        LOG.info(\"to writeSnapshots\");\n+                        while (context.getRunningContext().getState() == ServerState.BUSY) {\n+                            Thread.sleep(5000);\n+                        }\n+                        writeSnapshots();\n+                    } catch (Exception ioe) {\n+                        LOG.error(\"write snapshots error: \", ioe);\n+                    }\n+                } catch (InterruptedException e) {\n+                    if (!stopped.get()) {\n+                        LOG.warn(\"Snapshot dump dispatcher is interrupted. Returning.\");\n+                    }\n+                }\n             }\n-            writeSnapshots();\n-          } catch (Exception ioe) {\n-            LOG.error(\"write snapshots error: \", ioe);\n-          }\n-        } catch (InterruptedException e) {\n-          if (!stopped.get()) {\n-            LOG.warn(\"Snapshot dump dispatcher is interrupted. Returning.\");\n-          }\n+        });\n+        dumpDispatcher.setName(\"snapshot-dump-dispatcher\");\n+        dumpDispatcher.start();\n+    }\n+\n+    /**\n+     * Write snapshot\n+     */\n+    private void writeSnapshots() throws Exception {\n+        List<Integer> matrixIds = null;\n+        if (needDumpMatrices == null) {\n+            matrixIds = new ArrayList<>(context.getMatrixMetaManager().getMatrixMetas().keySet());\n+        } else {\n+            matrixIds = toMatrixIds();\n         }\n-      }\n-    });\n-    dumpDispatcher.setName(\"snapshot-dump-dispatcher\");\n-    dumpDispatcher.start();\n-  }\n \n-  /**\n-   * Write snapshot\n-   */\n-  private void writeSnapshots() throws Exception {\n-    List<Integer> matrixIds = null;\n-    if (needDumpMatrices == null) {\n-      matrixIds = new ArrayList<>(context.getMatrixMetaManager().getMatrixMetas().keySet());\n-    } else {\n-      matrixIds = toMatrixIds();\n-    }\n+        if (matrixIds.isEmpty()) {\n+            return;\n+        }\n \n-    if (matrixIds.isEmpty()) {\n-      return;\n-    }\n+        List<Integer> needDumpMatrices = filter(matrixIds);\n+        if (needDumpMatrices != null && !needDumpMatrices.isEmpty()) {\n+            FileSystem fs = baseDirPath.getFileSystem(context.getConf());\n+            Path tmpPath = HdfsUtil.toTmpPath(baseDirPath);\n+            if (fs.exists(tmpPath)) {\n+                fs.delete(tmpPath, true);\n+            }\n+\n+            List<Integer> ids = filter(matrixIds);\n+            if (!ids.isEmpty()) {\n+                int size = ids.size();\n+                List<PSMatrixSaveContext> saveContexts = new ArrayList<>(size);\n+                for (int i = 0; i < size; i++) {\n+                    MatrixMeta meta = context.getMatrixMetaManager().getMatrixMeta(ids.get(i));\n+                    saveContexts.add(\n+                            new PSMatrixSaveContext(ids.get(i),\n+                                    new ArrayList<>(meta.getPartitionMetas().keySet()),\n+                                    null, SnapshotFormat.class.getName(),\n+                                    new Path(tmpPath, meta.getName()).toString(),\n+                                    true, false));\n+                }\n \n-    List<Integer> needDumpMatrices = filter(matrixIds);\n-    if (needDumpMatrices != null && !needDumpMatrices.isEmpty()) {\n-      FileSystem fs = baseDirPath.getFileSystem(context.getConf());\n-      Path tmpPath = HdfsUtil.toTmpPath(baseDirPath);\n-      if (fs.exists(tmpPath)) {\n-        fs.delete(tmpPath, true);\n-      }\n+                context.getIOExecutors()\n+                        .save(new PSMatricesSaveContext(-1, -1, saveContexts), dumpParallel);\n+                HdfsUtil.rename(tmpPath, baseDirPath, fs);\n+            }\n+        }\n+    }\n \n-      List<Integer> ids = filter(matrixIds);\n-      if (!ids.isEmpty()) {\n-        int size = ids.size();\n-        List<PSMatrixSaveContext> saveContexts = new ArrayList<>(size);\n+    /**\n+     * Get the matrices that need dump\n+     *\n+     * @param matrixIds all matrices\n+     * @return the matrices that need dump\n+     */\n+    private List<Integer> filter(List<Integer> matrixIds) throws ServiceException {\n+        int size = matrixIds.size();\n+        List<Integer> ret = new ArrayList<>(size);\n         for (int i = 0; i < size; i++) {\n-          MatrixMeta meta = context.getMatrixMetaManager().getMatrixMeta(ids.get(i));\n-          saveContexts.add(\n-              new PSMatrixSaveContext(ids.get(i),\n-                  new ArrayList<>(meta.getPartitionMetas().keySet()),\n-                  null, SnapshotFormat.class.getName(),\n-                  new Path(tmpPath, meta.getName()).toString(),\n-                  true, false));\n+            if (checkNeedDump(matrixIds.get(i))) {\n+                ret.add(matrixIds.get(i));\n+            }\n         }\n \n-        context.getIOExecutors()\n-            .save(new PSMatricesSaveContext(-1, -1, saveContexts), dumpParallel);\n-        HdfsUtil.rename(tmpPath, baseDirPath, fs);\n-      }\n+        return ret;\n     }\n-  }\n \n-  /**\n-   * Get the matrices that need dump\n-   *\n-   * @param matrixIds all matrices\n-   * @return the matrices that need dump\n-   */\n-  private List<Integer> filter(List<Integer> matrixIds) throws ServiceException {\n-    int size = matrixIds.size();\n-    List<Integer> ret = new ArrayList<>(size);\n-    for (int i = 0; i < size; i++) {\n-      if (checkNeedDump(matrixIds.get(i))) {\n-        ret.add(matrixIds.get(i));\n-      }\n+    /**\n+     * Is this matrix need dump\n+     *\n+     * @param matrixId matrix id\n+     * @return true mean need dump\n+     */\n+    private boolean checkNeedDump(int matrixId) throws ServiceException {\n+        if (mode == RunningMode.ANGEL_PS) {\n+            return true;\n+        } else {\n+            MasterClient master = context.getMaster();\n+            if (master == null) {\n+                return false;\n+            } else {\n+                int iteration = context.getMaster().getIteration();\n+                return iteration > lastIteration;\n+            }\n+        }\n     }\n \n-    return ret;\n-  }\n-\n-  /**\n-   * Is this matrix need dump\n-   *\n-   * @param matrixId matrix id\n-   * @return true mean need dump\n-   */\n-  private boolean checkNeedDump(int matrixId) throws ServiceException {\n-    if (mode == RunningMode.ANGEL_PS) {\n-      return true;\n-    } else {\n-      MasterClient master = context.getMaster();\n-      if (master == null) {\n-        return false;\n-      } else {\n-        int iteration = context.getMaster().getIteration();\n-        return iteration > lastIteration;\n-      }\n-    }\n-  }\n+    private List<Integer> toMatrixIds() {\n+        List<Integer> matrixIds = new ArrayList<>(needDumpMatrices.length);\n+        for (int i = 0; i < needDumpMatrices.length; i++) {\n+            MatrixMeta meta = context.getMatrixMetaManager().getMatrixMeta(needDumpMatrices[i]);\n+            if (meta != null) {\n+                matrixIds.add(meta.getId());\n+            }\n+        }\n \n-  private List<Integer> toMatrixIds() {\n-    List<Integer> matrixIds = new ArrayList<>(needDumpMatrices.length);\n-    for (int i = 0; i < needDumpMatrices.length; i++) {\n-      MatrixMeta meta = context.getMatrixMetaManager().getMatrixMeta(needDumpMatrices[i]);\n-      if (meta != null) {\n-        matrixIds.add(meta.getId());\n-      }\n+        return matrixIds;\n     }\n \n-    return matrixIds;\n-  }\n-\n-  public void stop() {\n-    if (!stopped.getAndSet(true)) {\n-      if (dumpDispatcher != null) {\n-        dumpDispatcher.interrupt();\n-      }\n+    public void stop() {\n+        if (!stopped.getAndSet(true)) {\n+            if (dumpDispatcher != null) {\n+                dumpDispatcher.interrupt();\n+            }\n+        }\n     }\n-  }\n }\n",
            "diff_size": 226
        },
        {
            "tool": "naturalize",
            "errors": [
                {
                    "line": "6",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 102).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "183",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 200).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                }
            ],
            "diff": "diff --git a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/errored/1/221/SnapshotDumper.java b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/naturalize/221/SnapshotDumper.java\nindex 6196e46be7..9cd4a2d44e 100644\n--- a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/errored/1/221/SnapshotDumper.java\n+++ b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/naturalize/221/SnapshotDumper.java\n@@ -15,7 +15,6 @@\n  *\n  */\n \n-\n package com.tencent.angel.ps.io.save;\n \n import com.google.protobuf.ServiceException;\n@@ -101,11 +100,9 @@ public class SnapshotDumper {\n     backupIntervalMs = context.getConf()\n         .getInt(AngelConf.ANGEL_PS_BACKUP_INTERVAL_MS,\n             AngelConf.DEFAULT_ANGEL_PS_BACKUP_INTERVAL_MS);\n-\n-    dumpParallel = context.getConf()\n+dumpParallel = context.getConf()\n         .getInt(AngelConf.ANGEL_PS_BACKUP_PARALLEL, AngelConf.DEFAULT_ANGEL_PS_BACKUP_PARALLEL);\n-\n-    outputDir = context.getConf().get(AngelConf.ANGEL_JOB_TMP_OUTPUT_PATH);\n+outputDir = context.getConf().get(AngelConf.ANGEL_JOB_TMP_OUTPUT_PATH);\n     baseDirPath = new Path(\n         outputDir + Path.SEPARATOR + ModelFilesConstent.snapshotDirName + Path.SEPARATOR + context\n             .getPSAttemptId().getPsId() + Path.SEPARATOR + context.getPSAttemptId().getIndex());\n@@ -183,14 +180,9 @@ public class SnapshotDumper {\n         for (int i = 0; i < size; i++) {\n           MatrixMeta meta = context.getMatrixMetaManager().getMatrixMeta(ids.get(i));\n           saveContexts.add(\n-              new PSMatrixSaveContext(ids.get(i),\n-                  new ArrayList<>(meta.getPartitionMetas().keySet()),\n-                  null, SnapshotFormat.class.getName(),\n-                  new Path(tmpPath, meta.getName()).toString(),\n-                  true, false));\n-        }\n-\n-        context.getIOExecutors()\n+              new PSMatrixSaveContext(ids.get(i), new ArrayList<>(meta.getPartitionMetas().keySet()), null, SnapshotFormat.class.getName(), new Path(tmpPath, meta.getName()).toString(), true, false));\n+  }\n+context.getIOExecutors()\n             .save(new PSMatricesSaveContext(-1, -1, saveContexts), dumpParallel);\n         HdfsUtil.rename(tmpPath, baseDirPath, fs);\n       }\n@@ -254,4 +246,4 @@ public class SnapshotDumper {\n       }\n     }\n   }\n-}\n+}\n\\ No newline at end of file\n",
            "diff_size": 14
        },
        {
            "tool": "codebuff",
            "errors": [
                {
                    "line": "6",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 102).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "47",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 50.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                },
                {
                    "line": "52",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 55.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                },
                {
                    "line": "57",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 60.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                },
                {
                    "line": "63",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 66.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                },
                {
                    "line": "68",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 71.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                },
                {
                    "line": "73",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 76.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                },
                {
                    "line": "78",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 81.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                },
                {
                    "line": "83",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 86.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                },
                {
                    "line": "89",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 95.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                },
                {
                    "line": "100",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 134).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "101",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 124).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "103",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 201).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "112",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 116.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                },
                {
                    "line": "118",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 122.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                },
                {
                    "line": "127",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 126).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "131",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 108).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "132",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 118).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "135",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 120).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "136",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 139).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "140",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 104).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "149",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 153.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                },
                {
                    "line": "176",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 132).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "177",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 101).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "178",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 107).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "179",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 235).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "181",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 162).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "182",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 111).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                },
                {
                    "line": "187",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 194.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                },
                {
                    "line": "205",
                    "severity": "error",
                    "message": "Block comment has incorrect indentation level 2, expected is 4, indentation should be the same level as line 212.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck"
                }
            ],
            "diff": "diff --git a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/errored/1/221/SnapshotDumper.java b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/codebuff/221/SnapshotDumper.java\nindex 6196e46be7..dee210ad16 100644\n--- a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/errored/1/221/SnapshotDumper.java\n+++ b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/codebuff/221/SnapshotDumper.java\n@@ -41,161 +41,148 @@ import org.apache.hadoop.fs.Path;\n /**\n  * Snapshot dumper, it dump the matrices to hdfs once in a while\n  */\n-public class SnapshotDumper {\n \n-  private static final Log LOG = LogFactory.getLog(SnapshotDumper.class);\n+public class SnapshotDumper {\n+    private static final Log LOG = LogFactory.getLog(SnapshotDumper.class);\n   /**\n    * PS context\n    */\n-  private final PSContext context;\n+    private final PSContext context;\n \n   /**\n    * Dump interval in milliseconds\n    */\n-  private final int backupIntervalMs;\n+    private final int backupIntervalMs;\n \n   /**\n    * Dump dispatcher\n    */\n-  private volatile Thread dumpDispatcher;\n-  private final AtomicBoolean stopped;\n+    private volatile Thread dumpDispatcher;\n+    private final AtomicBoolean stopped;\n \n   /**\n    * Application tmp output path\n    */\n-  private final String outputDir;\n+    private final String outputDir;\n \n   /**\n    * Need dump matrices\n    */\n-  private final String[] needDumpMatrices;\n+    private final String[] needDumpMatrices;\n \n   /**\n    * Snapshot base directory path\n    */\n-  private final Path baseDirPath;\n+    private final Path baseDirPath;\n \n   /**\n    * Last dump iteration number\n    */\n-  private int lastIteration;\n+    private int lastIteration;\n \n   /**\n    * Application running mode\n    */\n-  private final RunningMode mode;\n-\n-  private final int dumpParallel;\n+    private final RunningMode mode;\n+    private final int dumpParallel;\n \n   /**\n    * Create a SnapshotDumper\n    *\n    * @param context PS context\n    */\n-  public SnapshotDumper(PSContext context) {\n+\n+    public SnapshotDumper(PSContext context) {\n     this.context = context;\n     stopped = new AtomicBoolean(false);\n     lastIteration = 0;\n     mode = context.getRunningMode();\n-\n-    backupIntervalMs = context.getConf()\n-        .getInt(AngelConf.ANGEL_PS_BACKUP_INTERVAL_MS,\n-            AngelConf.DEFAULT_ANGEL_PS_BACKUP_INTERVAL_MS);\n-\n-    dumpParallel = context.getConf()\n-        .getInt(AngelConf.ANGEL_PS_BACKUP_PARALLEL, AngelConf.DEFAULT_ANGEL_PS_BACKUP_PARALLEL);\n-\n+    backupIntervalMs = context.getConf().getInt(AngelConf.ANGEL_PS_BACKUP_INTERVAL_MS, AngelConf.DEFAULT_ANGEL_PS_BACKUP_INTERVAL_MS);\n+    dumpParallel = context.getConf().getInt(AngelConf.ANGEL_PS_BACKUP_PARALLEL, AngelConf.DEFAULT_ANGEL_PS_BACKUP_PARALLEL);\n     outputDir = context.getConf().get(AngelConf.ANGEL_JOB_TMP_OUTPUT_PATH);\n-    baseDirPath = new Path(\n-        outputDir + Path.SEPARATOR + ModelFilesConstent.snapshotDirName + Path.SEPARATOR + context\n-            .getPSAttemptId().getPsId() + Path.SEPARATOR + context.getPSAttemptId().getIndex());\n-\n+    baseDirPath = new Path(outputDir + Path.SEPARATOR + ModelFilesConstent.snapshotDirName + Path.SEPARATOR + context.getPSAttemptId().getPsId() + Path.SEPARATOR + context.getPSAttemptId().getIndex());\n     String matricesStr = context.getConf().get(AngelConf.ANGEL_PS_BACKUP_MATRICES);\n     if (matricesStr == null) {\n-      needDumpMatrices = null;\n+                                needDumpMatrices = null;\n     } else {\n       needDumpMatrices = matricesStr.split(\",\");\n     }\n-  }\n+    }\n \n   /**\n    * Init\n    */\n-  public void init() {\n-  }\n+\n+    public void init() {}\n \n   /**\n    * Start dump dispatcher\n    */\n-  public void start() {\n+\n+    public void start() {\n     LOG.info(\"Start snapshot dumper\");\n-    dumpDispatcher = new Thread(() -> {\n-      while (!stopped.get() && !Thread.currentThread().isInterrupted()) {\n-        try {\n-          Thread.sleep(backupIntervalMs);\n-          try {\n-            LOG.info(\"to writeSnapshots\");\n-            while (context.getRunningContext().getState() == ServerState.BUSY) {\n-              Thread.sleep(5000);\n-            }\n-            writeSnapshots();\n-          } catch (Exception ioe) {\n-            LOG.error(\"write snapshots error: \", ioe);\n-          }\n-        } catch (InterruptedException e) {\n-          if (!stopped.get()) {\n-            LOG.warn(\"Snapshot dump dispatcher is interrupted. Returning.\");\n-          }\n-        }\n-      }\n-    });\n+    dumpDispatcher = new Thread(()-> {\n+                         while (!stopped.get() && !Thread.currentThread().isInterrupted()) {\n+                                    try {\n+                                                                                               Thread.sleep(backupIntervalMs);\n+                                                                                               try {\n+                                        LOG.info(\"to writeSnapshots\");\n+\n+                                        while (context.getRunningContext().getState() == ServerState.BUSY) {\n+                                                                                                   Thread.sleep(5000);\n+                                        }\n+                                        writeSnapshots();\n+                                                                                               } catch (Exception ioe) {\n+                                                                                                 LOG.error(\"write snapshots error: \", ioe);\n+                                                                                               }\n+                                    } catch (InterruptedException e) {\n+                                      if (!stopped.get()) {\n+                                        LOG.warn(\"Snapshot dump dispatcher is interrupted. Returning.\");\n+                                      }\n+                                    }\n+                         }\n+                                });\n     dumpDispatcher.setName(\"snapshot-dump-dispatcher\");\n     dumpDispatcher.start();\n-  }\n+    }\n \n   /**\n    * Write snapshot\n    */\n-  private void writeSnapshots() throws Exception {\n+\n+    private void writeSnapshots() throws Exception {\n     List<Integer> matrixIds = null;\n     if (needDumpMatrices == null) {\n-      matrixIds = new ArrayList<>(context.getMatrixMetaManager().getMatrixMetas().keySet());\n+        matrixIds = new ArrayList<>(context.getMatrixMetaManager().getMatrixMetas().keySet());\n     } else {\n       matrixIds = toMatrixIds();\n     }\n \n     if (matrixIds.isEmpty()) {\n-      return;\n+        return;\n     }\n \n     List<Integer> needDumpMatrices = filter(matrixIds);\n     if (needDumpMatrices != null && !needDumpMatrices.isEmpty()) {\n-      FileSystem fs = baseDirPath.getFileSystem(context.getConf());\n-      Path tmpPath = HdfsUtil.toTmpPath(baseDirPath);\n-      if (fs.exists(tmpPath)) {\n+        FileSystem fs = baseDirPath.getFileSystem(context.getConf());\n+        Path tmpPath = HdfsUtil.toTmpPath(baseDirPath);\n+        if (fs.exists(tmpPath)) {\n         fs.delete(tmpPath, true);\n-      }\n-\n-      List<Integer> ids = filter(matrixIds);\n-      if (!ids.isEmpty()) {\n-        int size = ids.size();\n-        List<PSMatrixSaveContext> saveContexts = new ArrayList<>(size);\n-        for (int i = 0; i < size; i++) {\n-          MatrixMeta meta = context.getMatrixMetaManager().getMatrixMeta(ids.get(i));\n-          saveContexts.add(\n-              new PSMatrixSaveContext(ids.get(i),\n-                  new ArrayList<>(meta.getPartitionMetas().keySet()),\n-                  null, SnapshotFormat.class.getName(),\n-                  new Path(tmpPath, meta.getName()).toString(),\n-                  true, false));\n         }\n \n-        context.getIOExecutors()\n-            .save(new PSMatricesSaveContext(-1, -1, saveContexts), dumpParallel);\n-        HdfsUtil.rename(tmpPath, baseDirPath, fs);\n-      }\n+        List<Integer> ids = filter(matrixIds);\n+        if (!ids.isEmpty()) {\n+                                                                     int size = ids.size();\n+                                                                     List<PSMatrixSaveContext> saveContexts = new ArrayList<>(size);\n+                                                                     for (int i = 0; i < size; i++) {\n+                                MatrixMeta meta = context.getMatrixMetaManager().getMatrixMeta(ids.get(i));\n+                                saveContexts.add(new PSMatrixSaveContext(ids.get(i), new ArrayList<>(meta.getPartitionMetas().keySet()), null, SnapshotFormat.class.getName(), new Path(tmpPath, meta.getName()).toString(), true, false));\n+                                                                     }\n+                                                                     context.getIOExecutors().save(new PSMatricesSaveContext(-1, -1, saveContexts), dumpParallel);\n+                                                                     HdfsUtil.rename(tmpPath, baseDirPath, fs);\n+        }\n+    }\n     }\n-  }\n \n   /**\n    * Get the matrices that need dump\n@@ -203,17 +190,17 @@ public class SnapshotDumper {\n    * @param matrixIds all matrices\n    * @return the matrices that need dump\n    */\n-  private List<Integer> filter(List<Integer> matrixIds) throws ServiceException {\n+\n+    private List<Integer> filter(List<Integer> matrixIds) throws ServiceException {\n     int size = matrixIds.size();\n     List<Integer> ret = new ArrayList<>(size);\n     for (int i = 0; i < size; i++) {\n-      if (checkNeedDump(matrixIds.get(i))) {\n+        if (checkNeedDump(matrixIds.get(i))) {\n         ret.add(matrixIds.get(i));\n-      }\n+        }\n     }\n-\n     return ret;\n-  }\n+    }\n \n   /**\n    * Is this matrix need dump\n@@ -221,37 +208,38 @@ public class SnapshotDumper {\n    * @param matrixId matrix id\n    * @return true mean need dump\n    */\n-  private boolean checkNeedDump(int matrixId) throws ServiceException {\n+\n+    private boolean checkNeedDump(int matrixId) throws ServiceException {\n     if (mode == RunningMode.ANGEL_PS) {\n-      return true;\n+        return true;\n     } else {\n       MasterClient master = context.getMaster();\n       if (master == null) {\n-        return false;\n+               return false;\n       } else {\n         int iteration = context.getMaster().getIteration();\n         return iteration > lastIteration;\n       }\n     }\n-  }\n+    }\n \n-  private List<Integer> toMatrixIds() {\n+    private List<Integer> toMatrixIds() {\n     List<Integer> matrixIds = new ArrayList<>(needDumpMatrices.length);\n     for (int i = 0; i < needDumpMatrices.length; i++) {\n-      MatrixMeta meta = context.getMatrixMetaManager().getMatrixMeta(needDumpMatrices[i]);\n-      if (meta != null) {\n+        MatrixMeta meta = context.getMatrixMetaManager().getMatrixMeta(needDumpMatrices[i]);\n+        if (meta != null) {\n         matrixIds.add(meta.getId());\n-      }\n+        }\n     }\n-\n     return matrixIds;\n-  }\n+    }\n \n-  public void stop() {\n+    public void stop() {\n     if (!stopped.getAndSet(true)) {\n-      if (dumpDispatcher != null) {\n+        if (dumpDispatcher != null) {\n         dumpDispatcher.interrupt();\n-      }\n+        }\n     }\n-  }\n-}\n+    }\n+\n+}\n\\ No newline at end of file\n",
            "diff_size": 113
        },
        {
            "tool": "styler_random",
            "errors": [
                {
                    "line": "6",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 102).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                }
            ],
            "diff": "",
            "diff_size": 0
        },
        {
            "tool": "styler_three_grams",
            "errors": [
                {
                    "line": "6",
                    "severity": "error",
                    "message": "Line is longer than 100 characters (found 102).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                }
            ],
            "diff": "diff --git a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/errored/1/221/SnapshotDumper.java b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/styler_three_grams/221/SnapshotDumper.java\nindex 6196e46be7..694e283a1a 100644\n--- a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/errored/1/221/SnapshotDumper.java\n+++ b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Angel-ML-angel/styler_three_grams/221/SnapshotDumper.java\n@@ -15,7 +15,6 @@\n  *\n  */\n \n-\n package com.tencent.angel.ps.io.save;\n \n import com.google.protobuf.ServiceException;\n",
            "diff_size": 1
        }
    ]
}