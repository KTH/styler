{
    "error_id": "476",
    "information": {
        "errors": [
            {
                "line": "68",
                "severity": "error",
                "message": "'METHOD_DEF' has more than 1 empty lines before.",
                "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.EmptyLineSeparatorCheck"
            }
        ]
    },
    "source_code": "\n\n    public Optional<Map<String, Object>> getMessagePayload(DelegateExecution execution) {\n        return messagePayloadMappingProvider.getMessagePayload(execution);\n    }\n",
    "results": [
        {
            "tool": "styler",
            "errors": [],
            "diff": "diff --git a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/errored/1/476/DefaultMessageExecutionContext.java b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/styler/476/DefaultMessageExecutionContext.java\nindex 0128c9c47f..3a56c8e5cc 100644\n--- a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/errored/1/476/DefaultMessageExecutionContext.java\n+++ b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/styler/476/DefaultMessageExecutionContext.java\n@@ -63,9 +63,7 @@ public class DefaultMessageExecutionContext implements MessageExecutionContext {\n                        });\n     }\n \n-\n-\n-    public Optional<Map<String, Object>> getMessagePayload(DelegateExecution execution) {\n+    public Optional<Map<String,Object>> getMessagePayload(DelegateExecution execution) {\n         return messagePayloadMappingProvider.getMessagePayload(execution);\n     }\n \n",
            "diff_size": 3
        },
        {
            "tool": "intellij",
            "errors": [
                {
                    "line": "67",
                    "severity": "error",
                    "message": "'METHOD_DEF' has more than 1 empty lines before.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.EmptyLineSeparatorCheck"
                }
            ],
            "diff": "diff --git a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/errored/1/476/DefaultMessageExecutionContext.java b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/intellij/476/DefaultMessageExecutionContext.java\nindex 0128c9c47f..a9a2750130 100644\n--- a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/errored/1/476/DefaultMessageExecutionContext.java\n+++ b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/intellij/476/DefaultMessageExecutionContext.java\n@@ -51,20 +51,19 @@ public class DefaultMessageExecutionContext implements MessageExecutionContext {\n     @Override\n     public String getMessageName(DelegateExecution execution) {\n         return evaluateExpression(Optional.ofNullable(messageEventDefinition.getMessageRef())\n-                                          .orElseGet(() -> messageEventDefinition.getMessageExpression()),\n-                                  execution);\n+                        .orElseGet(() -> messageEventDefinition.getMessageExpression()),\n+                execution);\n     }\n \n     public Optional<String> getCorrelationKey(DelegateExecution execution) {\n         return Optional.ofNullable(messageEventDefinition.getCorrelationKey())\n-                       .map(correlationKey -> {\n-                           return evaluateExpression(messageEventDefinition.getCorrelationKey(),\n-                                                     execution);\n-                       });\n+                .map(correlationKey -> {\n+                    return evaluateExpression(messageEventDefinition.getCorrelationKey(),\n+                            execution);\n+                });\n     }\n \n \n-\n     public Optional<Map<String, Object>> getMessagePayload(DelegateExecution execution) {\n         return messagePayloadMappingProvider.getMessagePayload(execution);\n     }\n@@ -77,11 +76,11 @@ public class DefaultMessageExecutionContext implements MessageExecutionContext {\n         Optional<Map<String, Object>> payload = getMessagePayload(execution);\n \n         return ThrowMessage.builder()\n-                           .name(name)\n-                           .correlationKey(correlationKey)\n-                           .businessKey(businessKey)\n-                           .payload(payload)\n-                           .build();\n+                .name(name)\n+                .correlationKey(correlationKey)\n+                .businessKey(businessKey)\n+                .payload(payload)\n+                .build();\n     }\n \n     @Override\n@@ -92,12 +91,12 @@ public class DefaultMessageExecutionContext implements MessageExecutionContext {\n         Optional<String> correlationKey = getCorrelationKey(execution);\n \n         correlationKey.ifPresent(key -> assertNoExistingDuplicateEventSubscriptions(messageName,\n-                                                                                    key,\n-                                                                                    commandContext));\n+                key,\n+                commandContext));\n \n         MessageEventSubscriptionEntity messageEvent = commandContext.getEventSubscriptionEntityManager()\n-                                                                    .insertMessageEvent(messageName,\n-                                                                                        ExecutionEntity.class.cast(execution));\n+                .insertMessageEvent(messageName,\n+                        ExecutionEntity.class.cast(execution));\n         correlationKey.ifPresent(messageEvent::setConfiguration);\n \n         return messageEvent;\n@@ -114,9 +113,9 @@ public class DefaultMessageExecutionContext implements MessageExecutionContext {\n     protected String evaluateExpression(String expression,\n                                         DelegateExecution execution) {\n         return Optional.ofNullable(expressionManager.createExpression(expression))\n-                       .map(it -> it.getValue(execution))\n-                       .map(Object::toString)\n-                       .orElseThrow(() -> new ActivitiIllegalArgumentException(\"Expression '\" + expression + \"' is null\"));\n+                .map(it -> it.getValue(execution))\n+                .map(Object::toString)\n+                .orElseThrow(() -> new ActivitiIllegalArgumentException(\"Expression '\" + expression + \"' is null\"));\n     }\n \n     protected void assertNoExistingDuplicateEventSubscriptions(String messageName,\n@@ -124,16 +123,16 @@ public class DefaultMessageExecutionContext implements MessageExecutionContext {\n                                                                CommandContext commandContext) {\n \n         List<EventSubscriptionEntity> existing = commandContext.getEventSubscriptionEntityManager()\n-                                                               .findEventSubscriptionsByName(\"message\",\n-                                                                                             messageName,\n-                                                                                             null);\n+                .findEventSubscriptionsByName(\"message\",\n+                        messageName,\n+                        null);\n         existing.stream()\n                 .filter(subscription -> Objects.equals(subscription.getConfiguration(),\n-                                                       correlationKey))\n+                        correlationKey))\n                 .findFirst()\n                 .ifPresent(subscription -> {\n                     throw new ActivitiIllegalArgumentException(\"Duplicate message subscription '\" + subscription.getEventName() +\n-                                                               \"' with correlation key '\" + subscription.getConfiguration() + \"'\");\n+                            \"' with correlation key '\" + subscription.getConfiguration() + \"'\");\n                 });\n \n     }\n",
            "diff_size": 24
        },
        {
            "tool": "naturalize",
            "errors": [],
            "diff": "diff --git a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/errored/1/476/DefaultMessageExecutionContext.java b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/naturalize/476/DefaultMessageExecutionContext.java\nindex 0128c9c47f..1dfff6a131 100644\n--- a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/errored/1/476/DefaultMessageExecutionContext.java\n+++ b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/naturalize/476/DefaultMessageExecutionContext.java\n@@ -50,22 +50,18 @@ public class DefaultMessageExecutionContext implements MessageExecutionContext {\n \n     @Override\n     public String getMessageName(DelegateExecution execution) {\n-        return evaluateExpression(Optional.ofNullable(messageEventDefinition.getMessageRef())\n-                                          .orElseGet(() -> messageEventDefinition.getMessageExpression()),\n+        return evaluateExpression(Optional.ofNullable(messageEventDefinition.getMessageRef()).orElseGet(() -> messageEventDefinition.getMessageExpression()),\n                                   execution);\n-    }\n+  }\n \n     public Optional<String> getCorrelationKey(DelegateExecution execution) {\n-        return Optional.ofNullable(messageEventDefinition.getCorrelationKey())\n-                       .map(correlationKey -> {\n+        return Optional.ofNullable(messageEventDefinition.getCorrelationKey()).map(correlationKey -> {\n                            return evaluateExpression(messageEventDefinition.getCorrelationKey(),\n-                                                     execution);\n-                       });\n-    }\n-\n-\n+        execution);\n+    });\n+  }\n \n-    public Optional<Map<String, Object>> getMessagePayload(DelegateExecution execution) {\n+public Optional<Map<String, Object>> getMessagePayload(DelegateExecution execution) {\n         return messagePayloadMappingProvider.getMessagePayload(execution);\n     }\n \n@@ -76,8 +72,7 @@ public class DefaultMessageExecutionContext implements MessageExecutionContext {\n         Optional<String> businessKey = Optional.ofNullable(execution.getProcessInstanceBusinessKey());\n         Optional<Map<String, Object>> payload = getMessagePayload(execution);\n \n-        return ThrowMessage.builder()\n-                           .name(name)\n+        return ThrowMessage.builder().name(name)\n                            .correlationKey(correlationKey)\n                            .businessKey(businessKey)\n                            .payload(payload)\n@@ -85,20 +80,16 @@ public class DefaultMessageExecutionContext implements MessageExecutionContext {\n     }\n \n     @Override\n-    public MessageEventSubscriptionEntity createMessageEventSubscription(CommandContext commandContext,\n-                                                                         DelegateExecution execution) {\n-\n-        String messageName = getMessageName(execution);\n+    public MessageEventSubscriptionEntity createMessageEventSubscription(CommandContext commandContext, DelegateExecution execution) {\n+  String messageName = getMessageName(execution);\n         Optional<String> correlationKey = getCorrelationKey(execution);\n \n         correlationKey.ifPresent(key -> assertNoExistingDuplicateEventSubscriptions(messageName,\n                                                                                     key,\n                                                                                     commandContext));\n \n-        MessageEventSubscriptionEntity messageEvent = commandContext.getEventSubscriptionEntityManager()\n-                                                                    .insertMessageEvent(messageName,\n-                                                                                        ExecutionEntity.class.cast(execution));\n-        correlationKey.ifPresent(messageEvent::setConfiguration);\n+MessageEventSubscriptionEntity messageEvent = commandContext.getEventSubscriptionEntityManager().insertMessageEvent(messageName, ExecutionEntity.class.cast(execution));\n+correlationKey.ifPresent(messageEvent::setConfiguration);\n \n         return messageEvent;\n     }\n@@ -113,28 +104,21 @@ public class DefaultMessageExecutionContext implements MessageExecutionContext {\n \n     protected String evaluateExpression(String expression,\n                                         DelegateExecution execution) {\n-        return Optional.ofNullable(expressionManager.createExpression(expression))\n-                       .map(it -> it.getValue(execution))\n+  return Optional.ofNullable(expressionManager.createExpression(expression)).map(it -> it.getValue(execution))\n                        .map(Object::toString)\n                        .orElseThrow(() -> new ActivitiIllegalArgumentException(\"Expression '\" + expression + \"' is null\"));\n-    }\n+  }\n \n-    protected void assertNoExistingDuplicateEventSubscriptions(String messageName,\n-                                                               String correlationKey,\n+    protected void assertNoExistingDuplicateEventSubscriptions(String messageName, String correlationKey,\n                                                                CommandContext commandContext) {\n-\n-        List<EventSubscriptionEntity> existing = commandContext.getEventSubscriptionEntityManager()\n-                                                               .findEventSubscriptionsByName(\"message\",\n+  List<EventSubscriptionEntity> existing = commandContext.getEventSubscriptionEntityManager().findEventSubscriptionsByName(\"message\",\n                                                                                              messageName,\n                                                                                              null);\n-        existing.stream()\n+existing.stream()\n                 .filter(subscription -> Objects.equals(subscription.getConfiguration(),\n-                                                       correlationKey))\n-                .findFirst()\n+        correlationKey)).findFirst()\n                 .ifPresent(subscription -> {\n-                    throw new ActivitiIllegalArgumentException(\"Duplicate message subscription '\" + subscription.getEventName() +\n-                                                               \"' with correlation key '\" + subscription.getConfiguration() + \"'\");\n-                });\n-\n+                    throw new ActivitiIllegalArgumentException(\"Duplicate message subscription '\" + subscription.getEventName() + \"' with correlation key '\" + subscription.getConfiguration() + \"'\");\n+    });\n     }\n-}\n+}\n\\ No newline at end of file\n",
            "diff_size": 37
        },
        {
            "tool": "codebuff",
            "errors": [
                {
                    "line": "37",
                    "severity": "error",
                    "message": "'CLASS_DEF' has more than 1 empty lines before.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.whitespace.EmptyLineSeparatorCheck"
                },
                {
                    "line": "106",
                    "severity": "error",
                    "message": "Line is longer than 240 characters (found 270).",
                    "source": "com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck"
                }
            ],
            "diff": "diff --git a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/errored/1/476/DefaultMessageExecutionContext.java b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/codebuff/476/DefaultMessageExecutionContext.java\nindex 0128c9c47f..1f744bdd5d 100644\n--- a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/errored/1/476/DefaultMessageExecutionContext.java\n+++ b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/codebuff/476/DefaultMessageExecutionContext.java\n@@ -26,115 +26,85 @@ import org.activiti.engine.impl.interceptor.CommandContext;\n import org.activiti.engine.impl.persistence.entity.EventSubscriptionEntity;\n import org.activiti.engine.impl.persistence.entity.ExecutionEntity;\n import org.activiti.engine.impl.persistence.entity.MessageEventSubscriptionEntity;\n-\n import java.util.List;\n import java.util.Map;\n import java.util.Objects;\n import java.util.Optional;\n-\n import java.util.Map;\n import java.util.Optional;\n \n+\n public class DefaultMessageExecutionContext implements MessageExecutionContext {\n+\n     private final ExpressionManager expressionManager;\n+\n     private final MessagePayloadMappingProvider messagePayloadMappingProvider;\n+\n     private final MessageEventDefinition messageEventDefinition;\n \n     public DefaultMessageExecutionContext(MessageEventDefinition messageEventDefinition,\n-                                          ExpressionManager expressionManager,\n-                                          MessagePayloadMappingProvider messagePayloadMappingProvider) {\n-        this.messageEventDefinition = messageEventDefinition;\n-        this.expressionManager = expressionManager;\n-        this.messagePayloadMappingProvider = messagePayloadMappingProvider;\n+                                          ExpressionManager expressionManager, MessagePayloadMappingProvider messagePayloadMappingProvider) {\n+    this.messageEventDefinition = messageEventDefinition;\n+    this.expressionManager = expressionManager;\n+    this.messagePayloadMappingProvider = messagePayloadMappingProvider;\n     }\n \n     @Override\n     public String getMessageName(DelegateExecution execution) {\n-        return evaluateExpression(Optional.ofNullable(messageEventDefinition.getMessageRef())\n-                                          .orElseGet(() -> messageEventDefinition.getMessageExpression()),\n-                                  execution);\n+        return evaluateExpression(Optional.ofNullable(messageEventDefinition.getMessageRef()).orElseGet(() -> messageEventDefinition.getMessageExpression()), execution);\n     }\n \n     public Optional<String> getCorrelationKey(DelegateExecution execution) {\n-        return Optional.ofNullable(messageEventDefinition.getCorrelationKey())\n-                       .map(correlationKey -> {\n-                           return evaluateExpression(messageEventDefinition.getCorrelationKey(),\n-                                                     execution);\n-                       });\n+    return Optional.ofNullable(messageEventDefinition.getCorrelationKey()).map(correlationKey -> {\n+                                                                               return evaluateExpression(messageEventDefinition.getCorrelationKey(),\n+                                                                                                         execution);\n+                                                                           });\n     }\n \n-\n-\n     public Optional<Map<String, Object>> getMessagePayload(DelegateExecution execution) {\n-        return messagePayloadMappingProvider.getMessagePayload(execution);\n+    return messagePayloadMappingProvider.getMessagePayload(execution);\n     }\n \n     @Override\n     public ThrowMessage createThrowMessage(DelegateExecution execution) {\n-        String name = getMessageName(execution);\n-        Optional<String> correlationKey = getCorrelationKey(execution);\n-        Optional<String> businessKey = Optional.ofNullable(execution.getProcessInstanceBusinessKey());\n-        Optional<Map<String, Object>> payload = getMessagePayload(execution);\n-\n-        return ThrowMessage.builder()\n-                           .name(name)\n-                           .correlationKey(correlationKey)\n-                           .businessKey(businessKey)\n-                           .payload(payload)\n-                           .build();\n+    String name = getMessageName(execution);\n+    Optional<String> correlationKey = getCorrelationKey(execution);\n+    Optional<String> businessKey = Optional.ofNullable(execution.getProcessInstanceBusinessKey());\n+    Optional<Map<String, Object>> payload = getMessagePayload(execution);\n+    return ThrowMessage.builder().name(name).correlationKey(correlationKey).businessKey(businessKey).payload(payload).build();\n     }\n \n     @Override\n-    public MessageEventSubscriptionEntity createMessageEventSubscription(CommandContext commandContext,\n-                                                                         DelegateExecution execution) {\n-\n-        String messageName = getMessageName(execution);\n-        Optional<String> correlationKey = getCorrelationKey(execution);\n+    public MessageEventSubscriptionEntity createMessageEventSubscription(CommandContext commandContext, DelegateExecution execution) {\n+    String messageName = getMessageName(execution);\n+    Optional<String> correlationKey = getCorrelationKey(execution);\n+    correlationKey.ifPresent(key -> assertNoExistingDuplicateEventSubscriptions(messageName, key, commandContext));\n \n-        correlationKey.ifPresent(key -> assertNoExistingDuplicateEventSubscriptions(messageName,\n-                                                                                    key,\n-                                                                                    commandContext));\n \n-        MessageEventSubscriptionEntity messageEvent = commandContext.getEventSubscriptionEntityManager()\n-                                                                    .insertMessageEvent(messageName,\n-                                                                                        ExecutionEntity.class.cast(execution));\n-        correlationKey.ifPresent(messageEvent::setConfiguration);\n-\n-        return messageEvent;\n+    MessageEventSubscriptionEntity messageEvent = commandContext.getEventSubscriptionEntityManager().insertMessageEvent(messageName,\n+                                                                                                                        ExecutionEntity.class.cast(execution));\n+    correlationKey.ifPresent(messageEvent::setConfiguration);\n+    return messageEvent;\n     }\n \n     public ExpressionManager getExpressionManager() {\n-        return expressionManager;\n+    return expressionManager;\n     }\n \n     public MessagePayloadMappingProvider getMessagePayloadMappingProvider() {\n-        return messagePayloadMappingProvider;\n+    return messagePayloadMappingProvider;\n     }\n \n-    protected String evaluateExpression(String expression,\n-                                        DelegateExecution execution) {\n-        return Optional.ofNullable(expressionManager.createExpression(expression))\n-                       .map(it -> it.getValue(execution))\n-                       .map(Object::toString)\n-                       .orElseThrow(() -> new ActivitiIllegalArgumentException(\"Expression '\" + expression + \"' is null\"));\n+    protected String evaluateExpression(String expression, DelegateExecution execution) {\n+    return Optional.ofNullable(expressionManager.createExpression(expression)).map(it -> it.getValue(execution)).map(Object::toString).orElseThrow(() -> new ActivitiIllegalArgumentException(\"Expression '\" + expression + \"' is null\"));\n     }\n \n-    protected void assertNoExistingDuplicateEventSubscriptions(String messageName,\n-                                                               String correlationKey,\n-                                                               CommandContext commandContext) {\n-\n-        List<EventSubscriptionEntity> existing = commandContext.getEventSubscriptionEntityManager()\n-                                                               .findEventSubscriptionsByName(\"message\",\n-                                                                                             messageName,\n-                                                                                             null);\n-        existing.stream()\n-                .filter(subscription -> Objects.equals(subscription.getConfiguration(),\n-                                                       correlationKey))\n-                .findFirst()\n-                .ifPresent(subscription -> {\n-                    throw new ActivitiIllegalArgumentException(\"Duplicate message subscription '\" + subscription.getEventName() +\n-                                                               \"' with correlation key '\" + subscription.getConfiguration() + \"'\");\n-                });\n-\n+    protected void assertNoExistingDuplicateEventSubscriptions(String messageName, String correlationKey, CommandContext commandContext) {\n+    List<EventSubscriptionEntity> existing = commandContext.getEventSubscriptionEntityManager().findEventSubscriptionsByName(\"message\", messageName, null);\n+    existing.stream().filter(subscription -> Objects.equals(subscription.getConfiguration(),\n+                                                            correlationKey)).findFirst().ifPresent(subscription -> {\n+                                                                                            throw new ActivitiIllegalArgumentException(\"Duplicate message subscription '\" + subscription.getEventName() + \"' with correlation key '\" + subscription.getConfiguration() + \"'\");\n+                                                                                        });\n     }\n-}\n+\n+}\n\\ No newline at end of file\n",
            "diff_size": 74
        },
        {
            "tool": "styler_random",
            "errors": [],
            "diff": "diff --git a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/errored/1/476/DefaultMessageExecutionContext.java b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/styler_random/476/DefaultMessageExecutionContext.java\nindex 0128c9c47f..3a56c8e5cc 100644\n--- a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/errored/1/476/DefaultMessageExecutionContext.java\n+++ b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/styler_random/476/DefaultMessageExecutionContext.java\n@@ -63,9 +63,7 @@ public class DefaultMessageExecutionContext implements MessageExecutionContext {\n                        });\n     }\n \n-\n-\n-    public Optional<Map<String, Object>> getMessagePayload(DelegateExecution execution) {\n+    public Optional<Map<String,Object>> getMessagePayload(DelegateExecution execution) {\n         return messagePayloadMappingProvider.getMessagePayload(execution);\n     }\n \n",
            "diff_size": 3
        },
        {
            "tool": "styler_three_grams",
            "errors": [],
            "diff": "diff --git a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/errored/1/476/DefaultMessageExecutionContext.java b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/styler_three_grams/476/DefaultMessageExecutionContext.java\nindex 0128c9c47f..cf4c37c4a7 100644\n--- a/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/errored/1/476/DefaultMessageExecutionContext.java\n+++ b/home/thomas/mnt/fernanda/styler-test2/python/./experiments/projects/../results/Activiti-Activiti/styler_three_grams/476/DefaultMessageExecutionContext.java\n@@ -63,10 +63,9 @@ public class DefaultMessageExecutionContext implements MessageExecutionContext {\n                        });\n     }\n \n-\n-\n     public Optional<Map<String, Object>> getMessagePayload(DelegateExecution execution) {\n-        return messagePayloadMappingProvider.getMessagePayload(execution);\n+\n+        returnmessagePayloadMappingProvider.getMessagePayload(execution);\n     }\n \n     @Override\n",
            "diff_size": 4
        }
    ]
}